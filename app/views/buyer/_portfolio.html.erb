<section class="buyer-portfolio">
  <div class="container">
    <h2 class="mb-3 text-center">Portfolio</h2>

    <div class="table-container">
      <table class="table table-hover table-responsive-sm">
        <thead class="thead-bg-color sticky-top">
          <tr>
            <th scope="col">Ticker</th>
            <th scope="col">Company Name</th>
            <th scope="col" class="text-center">Latest Price</th>
            <th scope="col" class="text-center">Broker</th>
            <th scope="col" class="text-center">Amount</th>
            <th scope="col" class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% portfolio.each do |transaction| %>
            <tr>
              <% buyer_stock = transaction.broker_stock %>
              <% stock = buyer_stock.stock %>
              <td><%= stock.ticker %></td>
              <td><%= stock.stock %></td>
              <td class="text-center">
                <%#= stock.price %>
                <%= 
                  number_with_precision(
                    stock.price, :precision => 2, :delimiter => ','
                  )
                %>
              <td class="text-center"><%= buyer_stock.user.email %></td>
              <td class="text-center"><%= transaction.amount %></td>
              <td class="text-center">
              <%= link_to "Buy", buy_path(transaction), class: "btn btn-info btn-sm mb-1 mb-xl-0" %>
              <%= link_to "Sell", sell_path(transaction), class: "btn btn-danger btn-sm" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</section>